{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\leono\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\-PI-Fatec-2025-2\\\\front\\\\src\\\\components\\\\login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jwtDecode } from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = ({\n  onLogin\n}) => {\n  _s();\n  const [form, setForm] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [error, setError] = useState(null);\n  const [isSignup, setIsSignup] = useState(false);\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    const route = isSignup ? \"signup\" : \"login\";\n    try {\n      const res = await fetch(`http://localhost:5000/auth/${route}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(form)\n      });\n      let data = {};\n      const contentType = res.headers.get(\"content-type\");\n      if (contentType && contentType.includes(\"application/json\")) {\n        data = await res.json();\n      }\n      if (res.ok) {\n        localStorage.setItem(\"token\", data.token);\n        const decoded = jwtDecode(data.token);\n        onLogin(decoded.username);\n      } else {\n        setError(data.message || (isSignup ? \"Signup failed.\" : \"Login failed.\"));\n      }\n    } catch (err) {\n      setError(\"Could not connect to server or invalid response.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: isSignup ? \"Sign Up\" : \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Username\",\n          type: \"text\",\n          name: \"username\",\n          value: form.username,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Password\",\n          type: \"password\",\n          name: \"password\",\n          value: form.password,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"login-button\",\n        type: \"submit\",\n        children: isSignup ? \"Sign Up\" : \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"toggle-button\",\n      style: {\n        marginTop: '1em'\n      },\n      onClick: () => setIsSignup(!isSignup),\n      children: isSignup ? \"Already have an account? Login\" : \"Don't have an account? Sign Up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"1FYb36eZEBsVY+3r4hCksaVRH/4=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","jwtDecode","jsxDEV","_jsxDEV","Login","onLogin","_s","form","setForm","username","password","error","setError","isSignup","setIsSignup","handleChange","e","target","name","value","handleSubmit","preventDefault","route","res","fetch","method","headers","body","JSON","stringify","data","contentType","get","includes","json","ok","localStorage","setItem","token","decoded","message","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","type","onChange","required","style","marginTop","onClick","color","_c","$RefreshReg$"],"sources":["C:/Users/leono/OneDrive/Área de Trabalho/-PI-Fatec-2025-2/front/src/components/login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\nconst Login = ({ onLogin }) => {\r\n    const [form, setForm] = useState({ username: \"\", password: \"\" });\r\n    const [error, setError] = useState(null);\r\n    const [isSignup, setIsSignup] = useState(false);\r\n\r\n    const handleChange = (e) => {\r\n        setForm({\r\n            ...form,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n        const route = isSignup ? \"signup\" : \"login\";\r\n        try {\r\n            const res = await fetch(`http://localhost:5000/auth/${route}`, {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(form)\r\n            });\r\n            let data = {};\r\n            const contentType = res.headers.get(\"content-type\");\r\n            if (contentType && contentType.includes(\"application/json\")) {\r\n                data = await res.json();\r\n            }\r\n            if (res.ok) {\r\n                localStorage.setItem(\"token\", data.token);\r\n                const decoded = jwtDecode(data.token);\r\n                onLogin(decoded.username);\r\n            } else {\r\n                setError(data.message || (isSignup ? \"Signup failed.\" : \"Login failed.\"));\r\n            }\r\n        } catch (err) {\r\n            setError(\"Could not connect to server or invalid response.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"login-container\">\r\n            <h2>{isSignup ? \"Sign Up\" : \"Login\"}</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <input\r\n                        placeholder='Username'\r\n                        type=\"text\"\r\n                        name=\"username\"\r\n                        value={form.username}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <input\r\n                        placeholder='Password'\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        value={form.password}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <button className='login-button' type=\"submit\">\r\n                    {isSignup ? \"Sign Up\" : \"Login\"}\r\n                </button>\r\n            </form>\r\n            <button\r\n                className='toggle-button'\r\n                style={{ marginTop: '1em' }}\r\n                onClick={() => setIsSignup(!isSignup)}\r\n            >\r\n                {isSignup ? \"Already have an account? Login\" : \"Don't have an account? Sign Up\"}\r\n            </button>\r\n            {error && <div style={{ color: \"red\" }}>{error}</div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}